---
layout: intro
---

### Часть 3
# Архитектура

<!--
##########################################################################################################################################
-->

---
layout: center
subtitle: Архитектура
---

# WYSWIYG

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->

---
layout: center
subtitle: Архитектура
---

# Какие бывают WYSIWYG движки?

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->

---
layout: default
subtitle: Архитектура
codeSize: 3rem
---

```ts{all}
html -> html
```

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->




---
layout: default
image: /part3/tinymce.png
subtitle: Архитектура
---

<Mode :wysiwyg="true" />



<!--
##########################################################################################################################################
-->

---
layout: default
image: /part3/ckeditor.png
subtitle: Архитектура
---

<Mode :wysiwyg="true" />



<!--
##########################################################################################################################################
-->



---
layout: two-cols
subtitle: Архитектура
---

# Недостатки редакторов<br>старого поколения

* зависимость от contenteditable и DOM;
* отсутствие структурированной модели данных;
* изначально не рассчитаны на совместное редактирование; 
* проблемы безопасности (XSS).

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->


---
layout: default
subtitle: Архитектура
codeSize: 3rem
---

```ts{2}
html -> html
virtual dom -> html
```

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->


---
layout: two-cols
subtitle: Архитектура
---

# Редакторы с внутренней<br>моделью документа

* Quill (2014);
* ProseMirror (2015);
* Draft.js (2016);
* Slate.js (2017);
* Editor.js (2018);
* CKEditor 5 (2018);
* Lexical (2022);

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

# Почему выбрали ProseMirror?

* он выравнивает браузеры
* он дает Виртуальный дом
* он гибкий и расширяемый
* он дает работу с с деревом и работу по позициям – плоско, далее пример
* девтулс

<Mode :wysiwyg="true" />

<!--
##########################################################################################################################################
-->


---
layout: two-cols
subtitle: Архитектура
---

# Преимущества ProseMirror<br>перед Draft.js и Editor.js

* гибкая модель документа (schema); 
* совместное редактирование из коробки;
* headless-режим и интеграция;
* расширяемость и кастомизация;
* производительность на больших документах.

<!--
##########################################################################################################################################
-->


---
layout: two-cols
subtitle: Архитектура
---

# Cравнение ProseMirror и Lexical

* в ProseMirror документ строго следует схеме, Lexical использует «двойной буфер» состояний;
* ProseMirror использует собственный механизм обновления DOM, Lexical реализует свой мини-виртуальный DOM;
* cовместное редактирование примерно похоже (интеграция с Yjs);
* оба фреймворка очень быстры и способны обрабатывать большие документы;

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

# Cравнение ProseMirror c Slate

* Slate фокусируется на интеграции с React ;
* ProseMirror строго контролирует валидность документа схемой;
* по производительности ProseMirror лучше;

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

# ProseMirror vs Editor.js

* Prosemirror 1 content editable
* коллаборативный режим из коробки

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

# Чем ProseMirror отличается от Lexical?

* похожи, на момент выбора Lexical еще не было;
* в целом ProseMirror и сейчас не уступает.

<!--
##########################################################################################################################################
-->

---
layout: center
subtitle: Архитектура
---

# Редактор в режиме разметки

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

# Какую библиотеку мы выбрали для режима разметки?
* Monaco побогаче функционал, но Codemirror похож;
* ProseMirror и CodeMirror автор один.

<!--
##########################################################################################################################################
-->

---
layout: center
subtitle: Архитектура
---

# Выводы

<!--
##########################################################################################################################################
-->

---
layout: two-cols
subtitle: Архитектура
---

ProseMirror + CodeMirror дают отличную связку.

<!--
##########################################################################################################################################
-->
